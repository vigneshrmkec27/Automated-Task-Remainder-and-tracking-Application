<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Task Details</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üëÅÔ∏è Task Details</h1>
            <p>Complete information about the task</p>
        </div>

        <!-- Task Details Card -->
        <div class="task-detail">
            <!-- Task ID -->
            <div class="task-detail-item">
                <label>Task ID:</label>
                <p th:text="${task.id}">1</p>
            </div>

            <!-- Task Title -->
            <div class="task-detail-item">
                <label>Title:</label>
                <p th:text="${task.title}" style="font-size: 1.3em; font-weight: 600; color: #333;">
                    Complete Project Documentation
                </p>
            </div>

            <!-- Task Description -->
            <div class="task-detail-item">
                <label>Description:</label>
                <p th:text="${task.description != null && !task.description.isEmpty()} ? ${task.description} : 'No description provided'"
                   style="line-height: 1.8;">
                    This task involves creating comprehensive documentation for the entire project.
                </p>
            </div>

            <!-- Task Priority -->
            <div class="task-detail-item">
                <label>Priority:</label>
                <p>
                    <span th:class="'priority-' + ${#strings.toLowerCase(task.priority)}"
                          th:text="${task.priority.displayName}"
                          style="font-size: 1.2em;">
                        High Priority
                    </span>
                </p>
            </div>

            <!-- Task Status -->
            <div class="task-detail-item">
                <label>Status:</label>
                <p>
                    <span th:class="'badge badge-' + ${#strings.toLowerCase(#strings.replace(task.status, '_', '-'))}"
                          th:text="${task.status.displayName}"
                          style="font-size: 1em; padding: 8px 16px;">
                        Pending
                    </span>
                </p>
            </div>

            <!-- Created On -->
            <div class="task-detail-item">
                <label>Created On:</label>
                <p th:text="${#temporals.format(task.createdOn, 'EEEE, MMMM dd, yyyy HH:mm:ss')}"
                   style="color: #666;">
                    Monday, December 15, 2024 10:30:45
                </p>
            </div>

            <!-- Completed On (if completed) -->
            <div class="task-detail-item" th:if="${task.completedOn != null}">
                <label>Completed On:</label>
                <p th:text="${#temporals.format(task.completedOn, 'EEEE, MMMM dd, yyyy HH:mm:ss')}"
                   style="color: #28a745; font-weight: 600;">
                    Tuesday, December 16, 2024 14:20:30
                </p>
            </div>

            <!-- Time Elapsed (if completed) -->
            <div class="task-detail-item" th:if="${task.completedOn != null}">
                <label>Time Taken:</label>
                <p th:text="${T(java.time.Duration).between(task.createdOn, task.completedOn).toDays()} + ' days'"
                   style="color: #666;">
                    1 days
                </p>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-bar" style="margin-top: 30px;">
            <a th:href="@{/tasks}" class="btn btn-secondary">‚Üê Back to Tasks</a>
            
            <div style="display: flex; gap: 10px;">
                <a th:href="@{/tasks/edit/{id}(id=${task.id})}" 
                   class="btn btn-warning">‚úèÔ∏è Edit Task</a>
                
                <a th:if="${task.status != T(com.taskreminder.app.enums.TaskStatus).COMPLETED}"
                   th:href="@{/tasks/complete/{id}(id=${task.id})}" 
                   class="btn btn-success"
                   onclick="return confirm('Mark this task as completed?')">
                   ‚úì Mark as Completed
                </a>
                
                <a th:href="@{/tasks/delete/{id}(id=${task.id})}" 
                   class="btn btn-danger"
                   onclick="return confirm('Are you sure you want to delete this task?')">
                   üóëÔ∏è Delete Task
                </a>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>&copy; 2024 Task Management System</p>
        </div>
    </div>
</body>
</html>